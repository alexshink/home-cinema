(function(){"use strict";var t={3498:function(t,e,o){var i=o(9242),n=o(3396),a=o(7139),s=o.p+"img/logo.cd294876.jpg";const l={class:"container"},r=(0,n._)("img",{alt:"Home Cinema",src:s,class:"page__logo"},null,-1),u={key:0,class:"page__inner"},c={key:1,class:"page__inner"},d={key:0,class:"footer"},m={class:"container"},h={class:"user-email"};function f(t,e,o,i,s,f){const _=(0,n.up)("FilmView");return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["page",{"page_auth-loading":s.authLoading}])},[(0,n._)("div",l,[r,s.activeUserFilmList?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("button",{type:"button",class:"button",onClick:e[0]||(e[0]=t=>f.loadFilms("Нэйт"))},"Нэйт"),(0,n._)("button",{type:"button",class:"button",onClick:e[1]||(e[1]=t=>f.loadFilms("Алекс"))},"Алекс")])),s.activeUserFilmList?((0,n.wg)(),(0,n.iD)("div",c,[s.activeUserFilmList?((0,n.wg)(),(0,n.j4)(_,{key:0,author:s.activeUserFilmList},null,8,["author"])):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:"button button_theme_secondary",onClick:e[2]||(e[2]=(...t)=>f.goBack&&f.goBack(...t))},"Назад")])):(0,n.kq)("",!0)]),s.currentUser?((0,n.wg)(),(0,n.iD)("footer",d,[(0,n._)("div",m,[(0,n._)("div",h,(0,a.zw)(s.currentUser?.email),1)])])):(0,n.kq)("",!0)],2)}const _=t=>((0,n.dD)("data-v-2560d5e6"),t=t(),(0,n.Cn)(),t),p={key:0,class:"film-box"},g={key:0},w={key:1,class:"film-box__inner"},b=_((()=>(0,n._)("p",null,"Фильмы загружены, пора сделать выбор!",-1))),v={class:"film-box__item-title"},y={class:"film-box__item-poster"},k=["src"],F={class:"film-box__actions"},C={key:1,type:"button",disabled:"",class:"button"},P={key:2,class:"modal"},U={key:1,class:"modal"};function A(t,e,o,s,l,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["film-view",{"film-view_loading":l.loading}])},[l.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,[l.filmList.length?((0,n.wg)(),(0,n.iD)("div",w,[l.currentRandomFilm?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n._)("div",{class:(0,a.C_)(["film-box__item",{"film-box__item_viewed":l.currentRandomFilm.viewed}])},[(0,n._)("h1",v,(0,a.zw)(l.currentRandomFilm.name),1),(0,n._)("div",y,[l.currentRandomFilm.poster?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"film-box__item-image",src:l.currentRandomFilm.poster,alt:""},null,8,k)):(0,n.kq)("",!0)])],2),(0,n._)("div",F,[l.currentRandomFilm.viewed?((0,n.wg)(),(0,n.iD)("button",C,"Уже просмотрен!")):((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"button",onClick:e[1]||(e[1]=t=>r.setAlreadyViewed())},"Смотрим этот!")),(0,n._)("button",{type:"button",class:"button",onClick:e[2]||(e[2]=t=>r.getRandomFilm())},"Другой ›")])],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[b,(0,n._)("button",{type:"button",class:"button",onClick:e[0]||(e[0]=t=>r.getRandomFilm())},"Погнали!")],64))])):((0,n.wg)(),(0,n.iD)("p",g,"Дэээмн, в этом списке пока нет фильмов, го добавлять!")),(0,n._)("button",{type:"button",class:"button button_theme_secondary",onClick:e[3]||(e[3]=t=>l.currentUser?l.showAddModal=!0:l.showAuthModal=!0)},"Добавить фильм"),l.showAddModal?((0,n.wg)(),(0,n.iD)("div",P,[(0,n._)("div",{class:(0,a.C_)(["modal__form",{modal__form_loading:l.addInProgress}])},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>l.filmName=t),placeholder:"Название фильма"},null,512),[[i.nr,l.filmName]]),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>l.filmPoster=t),placeholder:"Ссылка на постер"},null,512),[[i.nr,l.filmPoster]]),(0,n._)("button",{type:"button",class:"button modal__form-submit",onClick:e[6]||(e[6]=t=>r.addFilm())},"Отправить"),(0,n._)("button",{type:"button",class:"button modal__form-close",onClick:e[7]||(e[7]=t=>l.showAddModal=!1)})],2)])):(0,n.kq)("",!0)])),l.showAuthModal?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",{class:(0,a.C_)(["modal__form",{modal__form_loading:l.signInProgress}])},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=t=>l.authEmail=t),placeholder:"Email"},null,512),[[i.nr,l.authEmail]]),(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":e[9]||(e[9]=t=>l.authPassword=t),placeholder:"Пароль"},null,512),[[i.nr,l.authPassword]]),(0,n._)("button",{type:"button",class:"button modal__form-submit",onClick:e[10]||(e[10]=t=>r.signIn())},"Войти"),(0,n._)("button",{type:"button",class:"button modal__form-close",onClick:e[11]||(e[11]=t=>l.showAuthModal=!1)})],2)])):(0,n.kq)("",!0)],2)}o(560);var D=o(4287),x=o(7795);const I=(0,x.ZF)({apiKey:"AIzaSyBBi-qazeRwtQ223P0Gfm01uiflzvjvSxk",authDomain:"home-cinema-28af0.firebaseapp.com",projectId:"home-cinema-28af0",storageBucket:"home-cinema-28af0.appspot.com",messagingSenderId:"642870991425",appId:"1:642870991425:web:05c0f861395d9758fec4c0",measurementId:"G-D7CZHB9FZY"}),L=(0,D.ad)(I);var M=o(4672),R={name:"FilmView",props:{author:{required:!0,type:String,validator(t){return["Нэйт","Алекс"].includes(t)}}},data(){return{filmList:[],loading:!0,currentRandomFilm:null,currentUser:(0,M.v0)().currentUser,showAuthModal:!1,authEmail:"",authPassword:"",signInProgress:!1,showAddModal:!1,filmName:"",filmPoster:"",addInProgress:!1}},methods:{getRandomFilm(){const t=Math.floor(Math.random()*this.filmList.length);this.currentRandomFilm=this.filmList[t]},async setAlreadyViewed(){if(this.checkAuth())try{await(0,D.r7)((0,D.JU)(L,"films",this.currentRandomFilm.id),{viewed:!0}),this.currentRandomFilm.viewed=!0}catch(t){alert(t)}},async addFilm(){if(this.filmName){this.addInProgress=!0;try{await(0,D.ET)((0,D.hJ)(L,"films"),{name:this.filmName,author:this.author,poster:this.filmPoster,viewed:!1}),await this.loadFilms(),this.showAddModal=!1}catch(t){alert(t)}finally{this.addInProgress=!1}}},signIn(){this.authEmail&&this.authPassword&&(this.signInProgress=!0,(0,M.e5)((0,M.v0)(),this.authEmail,this.authPassword).then((t=>{this.currentUser=t.user,this.showAuthModal=!1})).catch((t=>{console.log(t)})).finally((()=>{this.signInProgress=!1})))},logOut(){const t=(0,M.v0)();(0,M.w7)(t).then((()=>{window.location.reload()})).catch((t=>{console.log(t)}))},checkAuth(){return!!this.currentUser||(this.showAuthModal=!0,!1)},async loadFilms(){this.loading=!0;try{const t=(0,D.IO)((0,D.hJ)(L,"films"),(0,D.ar)("author","==",this.author)),e=await(0,D.PL)(t);e.forEach((t=>{const e=t.data();e.id=t.id,this.filmList.push(e)}))}catch(t){console.log(t)}finally{this.loading=!1}}},mounted(){this.loadFilms()}},O=o(89);const j=(0,O.Z)(R,[["render",A],["__scopeId","data-v-2560d5e6"]]);var q=j,E={name:"App",components:{FilmView:q},data(){return{films:[],activeUserFilmList:null,currentUser:null,authLoading:!0}},methods:{loadFilms(t){this.activeUserFilmList=t},goBack(){this.activeUserFilmList=null}},async mounted(){const t=(0,M.v0)();(0,M.Aj)(t,(t=>{t&&(this.currentUser=t),this.authLoading=!1}))}};const V=(0,O.Z)(E,[["render",f]]);var B=V;(0,i.ri)(B).mount("#app")}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,i,n,a){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],a=t[c][2];for(var l=!0,r=0;r<i.length;r++)(!1&a||s>=a)&&Object.keys(o.O).every((function(t){return o.O[t](i[r])}))?i.splice(r--,1):(l=!1,a<s&&(s=a));if(l){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[i,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/home-cinema/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,a,s=i[0],l=i[1],r=i[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(r)var c=r(o)}for(e&&e(i);u<s.length;u++)a=s[u],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},i=self["webpackChunkhome_cinema"]=self["webpackChunkhome_cinema"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(3498)}));i=o.O(i)})();
//# sourceMappingURL=app.759eed63.js.map