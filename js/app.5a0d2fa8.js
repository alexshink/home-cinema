(function(){var t={1031:function(t,o,i){"use strict";var e=i(9242),n=i(3396),s=i(7139),a=i.p+"img/logo.cd294876.jpg";const r={class:"container"},l=(0,n._)("img",{alt:"Home Cinema",src:a,class:"page__logo"},null,-1),p={key:0,class:"page__inner"},c={key:1,class:"page__inner"},u={key:0,class:"footer"},h={class:"container"};function _(t,o,i,e,a,_){const d=(0,n.up)("FilmView");return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(["page",{"page_auth-loading":a.authLoading}])},[(0,n._)("div",r,[l,a.activeUserFilmList?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("button",{type:"button",class:"button",onClick:o[0]||(o[0]=t=>_.loadFilms("Нэйт"))},"Нэйт"),(0,n._)("button",{type:"button",class:"button",onClick:o[1]||(o[1]=t=>_.loadFilms("Алекс"))},"Алекс")])),a.activeUserFilmList?((0,n.wg)(),(0,n.iD)("div",c,[a.activeUserFilmList?((0,n.wg)(),(0,n.j4)(d,{key:0,author:a.activeUserFilmList},null,8,["author"])):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:"button button_theme_secondary",onClick:o[2]||(o[2]=(...t)=>_.goBack&&_.goBack(...t))},"Назад")])):(0,n.kq)("",!0)]),a.currentUser?((0,n.wg)(),(0,n.iD)("footer",u,[(0,n._)("div",h,[(0,n._)("div",{class:"user-email",onClick:o[3]||(o[3]=(...t)=>_.logOut&&_.logOut(...t))},(0,s.zw)(a.currentUser?.email),1)])])):(0,n.kq)("",!0)],2)}const d=t=>((0,n.dD)("data-v-97c84d6c"),t=t(),(0,n.Cn)(),t),m={key:0,class:"film-box"},g={key:0},f={key:1,class:"film-box__inner"},w=d((()=>(0,n._)("p",null,"Фильмы загружены, пора сделать выбор!",-1))),j={class:"film-box__info"},v={class:"film-box__item-title"},b={class:"film-box__item-poster"},y=["src"],k={key:1,class:"rada-photo"},F=["src"],x={class:"film-box__actions"},P={key:1,type:"button",disabled:"",class:"button"},M={key:2,class:"modal"},R={key:0,class:"modal__error"},U={key:1,class:"modal"};function D(t,o,a,r,l,p){return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(["film-view",{"film-view_loading":l.loading}])},[l.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",m,[l.filmList.length?((0,n.wg)(),(0,n.iD)("div",f,[l.currentRandomFilm?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.wy)((0,n._)("div",{class:(0,s.C_)(["film-box__item",{"film-box__item_viewed":l.currentRandomFilm.viewed}])},[(0,n._)("h1",v,(0,s.zw)(l.currentRandomFilm.name),1),(0,n._)("div",b,[l.currentRandomFilm.poster?((0,n.wg)(),(0,n.iD)("img",{key:0,class:"film-box__item-image",src:l.currentRandomFilm.poster,alt:""},null,8,y)):(0,n.kq)("",!0),"Нэйт"===a.author?((0,n.wg)(),(0,n.iD)("div",k,[l.randomRadaPhotoName?((0,n.wg)(),(0,n.iD)("img",{key:0,src:i(4125)(`./${l.randomRadaPhotoName}`),alt:""},null,8,F)):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])],2),[[e.F8,!t.changeFilm]]),(0,n._)("div",x,[l.currentRandomFilm.viewed?((0,n.wg)(),(0,n.iD)("button",P,"Уже просмотрен!")):((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"button",onClick:o[1]||(o[1]=t=>p.setAlreadyViewed())},"Смотрим этот!")),(0,n._)("button",{type:"button",class:"button",onClick:o[2]||(o[2]=t=>p.getRandomFilm())},"Другой ›")])],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[w,(0,n._)("div",j,[(0,n._)("div",null,[(0,n.Uk)("Фильмов в списке: "),(0,n._)("i",null,(0,s.zw)(l.filmList.length),1)]),(0,n._)("div",null,[(0,n.Uk)("Всего посмотрено: "),(0,n._)("i",null,(0,s.zw)(p.viewedFilmsLength),1)])]),(0,n._)("button",{type:"button",class:"button",onClick:o[0]||(o[0]=t=>p.getRandomFilm())},"Погнали!")],64))])):((0,n.wg)(),(0,n.iD)("p",g,"Дэээмн, в этом списке пока нет фильмов, го добавлять!")),(0,n._)("button",{type:"button",class:"button button_theme_secondary",onClick:o[3]||(o[3]=t=>l.currentUser?l.showAddModal=!0:l.showAuthModal=!0)},"Добавить фильм"),l.showAddModal?((0,n.wg)(),(0,n.iD)("div",M,[l.modalErrorMessage?((0,n.wg)(),(0,n.iD)("p",R,(0,s.zw)(l.modalErrorMessage),1)):(0,n.kq)("",!0),(0,n._)("div",{class:(0,s.C_)(["modal__form",{modal__form_loading:l.addInProgress}])},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=t=>l.filmName=t),placeholder:"Название фильма"},null,512),[[e.nr,l.filmName]]),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=t=>l.filmPoster=t),placeholder:"Ссылка на постер"},null,512),[[e.nr,l.filmPoster]]),(0,n._)("button",{type:"button",class:"button modal__form-submit",onClick:o[6]||(o[6]=t=>p.addFilm())},"Отправить"),(0,n._)("button",{type:"button",class:"button modal__form-close",onClick:o[7]||(o[7]=t=>l.showAddModal=!1)})],2)])):(0,n.kq)("",!0)])),l.showAuthModal?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",{class:(0,s.C_)(["modal__form",{modal__form_loading:l.signInProgress}])},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=t=>l.authEmail=t),placeholder:"Email"},null,512),[[e.nr,l.authEmail]]),(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":o[9]||(o[9]=t=>l.authPassword=t),placeholder:"Пароль"},null,512),[[e.nr,l.authPassword]]),(0,n._)("button",{type:"button",class:"button modal__form-submit",onClick:o[10]||(o[10]=t=>p.signIn())},"Войти"),(0,n._)("button",{type:"button",class:"button modal__form-close",onClick:o[11]||(o[11]=t=>l.showAuthModal=!1)})],2)])):(0,n.kq)("",!0)],2)}i(560);var C=i(4287),L=i(7795);const O=(0,L.ZF)({apiKey:"AIzaSyBBi-qazeRwtQ223P0Gfm01uiflzvjvSxk",authDomain:"home-cinema-28af0.firebaseapp.com",projectId:"home-cinema-28af0",storageBucket:"home-cinema-28af0.appspot.com",messagingSenderId:"642870991425",appId:"1:642870991425:web:05c0f861395d9758fec4c0",measurementId:"G-D7CZHB9FZY"}),A=(0,C.ad)(O);var E=i(4672),N={name:"FilmView",props:{author:{required:!0,type:String,validator(t){return["Нэйт","Алекс"].includes(t)}}},data(){return{filmList:[],loading:!0,currentRandomFilm:null,currentUser:(0,E.v0)().currentUser,showAuthModal:!1,authEmail:"",authPassword:"",signInProgress:!1,showAddModal:!1,filmName:"",filmPoster:"",addInProgress:!1,modalErrorMessage:"",radaPhotosNames:[],randomRadaPhotoName:null}},computed:{viewedFilmsLength(){return this.filmList.filter((t=>t.viewed)).length}},methods:{async getRandomFilm(){const t=this.currentRandomFilm?.id,o=Math.floor(Math.random()*this.filmList.length),i=this.filmList[o];t===i.id?this.getRandomFilm():(this.currentRandomFilm=null,this.changeFilm=!0,await(0,n.Y3)(),this.changeFilm=!1,this.currentRandomFilm=i,this.getRandomRadaPhoto())},async setAlreadyViewed(){if(this.checkAuth())try{await(0,C.r7)((0,C.JU)(A,"films",this.currentRandomFilm.id),{viewed:!0}),this.currentRandomFilm.viewed=!0}catch(t){alert(t)}},async addFilm(){if(!this.filmName)return void(this.modalErrorMessage="Название фильма обязательное");const t=this.filmList.find((t=>t.name===this.filmName));if(t)this.modalErrorMessage="Фильм с таким названием уже в списке";else{this.addInProgress=!0;try{await(0,C.ET)((0,C.hJ)(A,"films"),{name:this.filmName,author:this.author,poster:this.filmPoster,viewed:!1}),await this.loadFilms(),this.showAddModal=!1,this.filmName="",this.filmPoster=""}catch(o){alert(o)}finally{this.addInProgress=!1}}},signIn(){this.authEmail&&this.authPassword||(this.modalErrorMessage="Оба поля обязательны"),this.signInProgress=!0,(0,E.e5)((0,E.v0)(),this.authEmail,this.authPassword).then((t=>{this.currentUser=t.user,this.showAuthModal=!1})).catch((t=>{console.log(t)})).finally((()=>{this.signInProgress=!1}))},checkAuth(){return!!this.currentUser||(this.showAuthModal=!0,!1)},async loadFilms(){this.loading=!0;try{const t=(0,C.IO)((0,C.hJ)(A,"films"),(0,C.ar)("author","==",this.author)),o=await(0,C.PL)(t);this.filmList=[],o.forEach((t=>{const o=t.data();o.id=t.id,this.filmList.push(o)}))}catch(t){console.log(t)}finally{this.loading=!1}},getAllRadaPhotos(){const t=i(1129);this.radaPhotosNames=t.keys()},getRandomRadaPhoto(){const t=Math.floor(Math.random()*this.radaPhotosNames.length);this.randomRadaPhotoName=this.radaPhotosNames[t].replace("./","")}},watch:{showAuthModal(){this.modalErrorMessage=""},showAddModal(){this.modalErrorMessage=""}},mounted(){this.getAllRadaPhotos(),this.loadFilms()}},I=i(89);const q=(0,I.Z)(N,[["render",D],["__scopeId","data-v-97c84d6c"]]);var V=q,z={name:"App",components:{FilmView:V},data(){return{films:[],activeUserFilmList:null,currentUser:null,authLoading:!0}},methods:{loadFilms(t){this.activeUserFilmList=t},goBack(){this.activeUserFilmList=null},logOut(){const t=(0,E.v0)();(0,E.w7)(t).then((()=>{window.location.reload()})).catch((t=>{console.log(t)}))}},async mounted(){const t=(0,E.v0)();(0,E.Aj)(t,(t=>{t&&(this.currentUser=t),this.authLoading=!1}))}};const B=(0,I.Z)(z,[["render",_]]);var T=B;(0,e.ri)(T).mount("#app")},4125:function(t,o,i){var e={"./photo_2023-10-28_22-12-43.jpg":2500,"./photo_2023-10-30_14-58-18.jpg":5615,"./photo_2023-10-30_14-58-19.jpg":5372,"./photo_2023-10-30_14-58-20.jpg":1010,"./photo_2023-10-30_14-58-22.jpg":12,"./photo_2023-10-30_14-58-23.jpg":9939,"./photo_2023-10-30_14-58-24.jpg":3301,"./photo_2023-10-30_14-58-26.jpg":3494,"./photo_2023-10-30_14-58-27.jpg":1809,"./photo_2023-10-30_14-58-28.jpg":7761,"./photo_2023-10-30_14-58-30.jpg":5798,"./photo_2023-10-30_14-58-35.jpg":3048,"./photo_2023-10-30_14-58-40 (2).jpg":1554,"./photo_2023-10-30_14-58-40.jpg":5786,"./photo_2023-10-30_14-58-42.jpg":5409,"./photo_2023-10-30_14-58-43.jpg":3271,"./photo_2023-10-30_14-58-44.jpg":4717,"./photo_2023-10-30_14-58-45.jpg":9825,"./photo_2023-10-30_14-58-47.jpg":3563,"./photo_2023-10-30_14-58-48.jpg":2858,"./photo_2023-10-30_14-58-49.jpg":5607,"./photo_2023-10-30_14-58-54.jpg":2214,"./photo_2023-10-30_14-58-58.jpg":5771,"./photo_2023-10-30_14-58-59.jpg":8920};function n(t){var o=s(t);return i(o)}function s(t){if(!i.o(e,t)){var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}return e[t]}n.keys=function(){return Object.keys(e)},n.resolve=s,t.exports=n,n.id=4125},1129:function(t,o,i){var e={"./photo_2023-10-28_22-12-43.jpg":2500,"./photo_2023-10-30_14-58-18.jpg":5615,"./photo_2023-10-30_14-58-19.jpg":5372,"./photo_2023-10-30_14-58-20.jpg":1010,"./photo_2023-10-30_14-58-22.jpg":12,"./photo_2023-10-30_14-58-23.jpg":9939,"./photo_2023-10-30_14-58-24.jpg":3301,"./photo_2023-10-30_14-58-26.jpg":3494,"./photo_2023-10-30_14-58-27.jpg":1809,"./photo_2023-10-30_14-58-28.jpg":7761,"./photo_2023-10-30_14-58-30.jpg":5798,"./photo_2023-10-30_14-58-35.jpg":3048,"./photo_2023-10-30_14-58-40 (2).jpg":1554,"./photo_2023-10-30_14-58-40.jpg":5786,"./photo_2023-10-30_14-58-42.jpg":5409,"./photo_2023-10-30_14-58-43.jpg":3271,"./photo_2023-10-30_14-58-44.jpg":4717,"./photo_2023-10-30_14-58-45.jpg":9825,"./photo_2023-10-30_14-58-47.jpg":3563,"./photo_2023-10-30_14-58-48.jpg":2858,"./photo_2023-10-30_14-58-49.jpg":5607,"./photo_2023-10-30_14-58-54.jpg":2214,"./photo_2023-10-30_14-58-58.jpg":5771,"./photo_2023-10-30_14-58-59.jpg":8920};function n(t){var o=s(t);return i(o)}function s(t){if(!i.o(e,t)){var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}return e[t]}n.keys=function(){return Object.keys(e)},n.resolve=s,t.exports=n,n.id=1129},2500:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-28_22-12-43.8522c3ed.jpg"},5615:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-18.38454585.jpg"},5372:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-19.89818d5b.jpg"},1010:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-20.3cb6c47d.jpg"},12:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-22.fc7d4bb7.jpg"},9939:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-23.0ad6ca7d.jpg"},3301:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-24.85f8364c.jpg"},3494:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-26.2ac4a51e.jpg"},1809:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-27.a45922ef.jpg"},7761:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-28.12eb18c3.jpg"},5798:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-30.b208228f.jpg"},3048:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-35.38e08fa8.jpg"},1554:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-40 (2).1ea0df3e.jpg"},5786:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-40.da13ea66.jpg"},5409:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-42.74f98166.jpg"},3271:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-43.94d5b726.jpg"},4717:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-44.2a57bb97.jpg"},9825:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-45.e82641c3.jpg"},3563:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-47.94e1dabf.jpg"},2858:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-48.29aa01f4.jpg"},5607:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-49.a815845a.jpg"},2214:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-54.3b89375b.jpg"},5771:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-58.29825a3e.jpg"},8920:function(t,o,i){"use strict";t.exports=i.p+"img/photo_2023-10-30_14-58-59.c9263e6a.jpg"}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var s=o[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(o,e,n,s){if(!e){var a=1/0;for(c=0;c<t.length;c++){e=t[c][0],n=t[c][1],s=t[c][2];for(var r=!0,l=0;l<e.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((function(t){return i.O[t](e[l])}))?e.splice(l--,1):(r=!1,s<a&&(a=s));if(r){t.splice(c--,1);var p=n();void 0!==p&&(o=p)}}return o}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[e,n,s]}}(),function(){i.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(o,{a:o}),o}}(),function(){i.d=function(t,o){for(var e in o)i.o(o,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){i.p="/home-cinema/"}(),function(){var t={143:0};i.O.j=function(o){return 0===t[o]};var o=function(o,e){var n,s,a=e[0],r=e[1],l=e[2],p=0;if(a.some((function(o){return 0!==t[o]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var c=l(i)}for(o&&o(e);p<a.length;p++)s=a[p],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(c)},e=self["webpackChunkhome_cinema"]=self["webpackChunkhome_cinema"]||[];e.forEach(o.bind(null,0)),e.push=o.bind(null,e.push.bind(e))}();var e=i.O(void 0,[998],(function(){return i(1031)}));e=i.O(e)})();
//# sourceMappingURL=app.5a0d2fa8.js.map